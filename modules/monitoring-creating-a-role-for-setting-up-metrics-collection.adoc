// Module included in the following assemblies:
//
// * monitoring/monitoring-your-own-services.adoc

[id="creating-a-role-for-setting-up-metrics-collection_{context}"]
= Creating a role for setting up metrics collection

By default, only cluster administrator users have access to metrics from your services. Using the soft tenancy feature, it is possible to also grant metrics access to an arbitrary user, who only has access to a particular project. To be able to grant metrics access, a user needs special permissions. This procedure shows how to create a role that gives such permissions.

.Procedure

. Create a YAML file for the new role. In this example, it is called `custom-metrics-role.yaml`.

. Fill the file with the configuration for the alerting rules:
+
[source,yaml]
----
kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  name: monitor-crd-edit
rules:
- apiGroups: ["monitoring.coreos.com"]
  resources: ["prometheusrules", "servicemonitors", "podmonitors"]
  verbs: ["get", "list", "watch", "create", "update", "patch", "delete"]
----
+
This configuration creates the `monitor-crd-edit` role, which enables the user to set up metrics collection for a service.

. Apply the configuration file to the cluster:
+
----
$ oc apply -f custom-metrics-role.yaml
----
+
Now the role is created.
