// Module included in the following assemblies:
//
// * rosa_getting_started/rosa-aws-privatelink-creating-cluster.adoc

[id="osd-aws-privatelink-config-dns-forwarding_{context}"]
= Configuring AWS PrivateLink DNS forwarding

With PrivateLink clusters, only a private hosted zone is created in Route53. With private-hosted zones, records within this zone are only resolvable from within the VPC it is assigned.
For more information about private hosted zone, read here: https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-private.html

.Prerequisites

* your corporate network or other VPC has connectivity and has ports UDP/53 TCP/53 enabled across networks to allow for DNS queries

.Procedure

. In order to allow for records such as api.<cluster-domain>, and *.apps.<cluster-domain> to resolve outside the VPC, a Route53 Resolver Inbound Endpoint must be configured. To configure an inbound endpoint, refer to AWS documentation here: https://aws.amazon.com/premiumsupport/knowledge-center/route53-resolve-with-inbound-endpoint/

. When configuring the inbound endpoint, select the VPC and private subnet(s) used during cluster installation.

. Once the endpoints are operational and associated, use those IP addresses to configure your corporate network to forward DNS queries to these IP addresses for the top-level cluster-domain (eg. drow-pl-01.htno.p1.openshiftapps.com).

. If forwarding DNS queries from one VPC to another, refer to the AWS documentation to configure forwarding rules: https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resolver-rules-managing.html
If configuring your remote network DNS server, please refer to your specific documentation to configure selective DNS forwarding for the installed cluster domain.
