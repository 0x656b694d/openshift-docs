// Module included in the following assemblies:
//
// * monitoring/user-workload-monitoring.adoc

[id="creating-an-alerting-rule-for-a-workload_{context}"]
= Creating an alerting rule for user workload metrics

You can create an alerting rule, which will fire an alert based on values of chosen metrics of the workload.

.Procedure

. Create a YAML file for the alerting rule. In this example, it is called `example-app-alerting-rule.yaml`.

. Fill the file with the configuration for the alerting rule:
+
[NOTE]
====
The expression can only reference metrics exposed using user workload monitoring. Currently it is not possible to correlate existing cluster level metrics.
====
+
[source,yaml]
----
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  name: example-alert
  namespace: ns1
spec:
  groups:
  - name: example
    rules:
    - alert: VersionAlert
      expr: version{job="prometheus-example-app"} == 0
----
+
This configuration creates an alerting rule named `example-alert`, which fires an alert when the `version` metric exposed by the sample application becomes `0`.

. Apply the configuration file to the cluster:
+
----
$ oc apply -f prometheus-example-app.yaml
----
+
It will take some time to create the alerting rule.
