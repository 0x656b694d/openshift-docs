// Module included in the following assemblies:
//
// * scaling_and_performance/using-topology-manager.adoc

[id="topology_manager_policies_{context}"]
= Topology Manager policies

Topology Manager works on Nodes and pods that meet the following conditions:

* The Node's CPU Manager Policy is configured as `static`.
* The pods are in the `Guaranteed` QoS class.

When the above conditions are met, Topology Manager will align CPU
and device requests for the Pod.

Topology Manager supports 4 allocation policies. These policies are set via a Kubelet
flag, `--topology-manager-policy`. The policies are:

* `none` (default)
* `best-effort`
* `restricted`
* `single-numa-node`


[id="topology-manager-none-policy_{context}"]
== none policy

This is the default policy and does not perform any topology alignment.

[id="topology-manager-best-effort-policy_{context}"]
== best-effort policy

For each container in a pod with the `best-effort` topology management policy, kubelet calls each Hint Provider to discover their resource
availability. Using this information, the Topology Manager stores the preferred NUMA Node affinity for that container. If the affinity is not preferred, Topology Manager stores this and admits the pod to the node.

[id="topology-manager-restricted-policy_{context}"]
== restricted policy

For each container in a pod with the `restricted` topology management policy, kubelet calls each Hint Provider to discover their resource
availability. Using this information, the Topology Manager stores the preferred NUMA Node affinity for that container. If the affinity is not
preferred, Topology Manager rejects this pod from the node, resulting in a pod in a `Terminated` state with a pod admission failure.

[id="topology-manager-single-numa-node_{context}"]
== single-numa-node

For each container in a pod with the `single-numa-node` topology management policy, kubelet calls each Hint Provider to discover their resource availability. Using this information, the Topology Manager determines if a single NUMA Node affinity is possible. If it is, the pod is admitted to the node. If a single NUMA Node affinity is not possible, the Topology Manager rejects the pod from the node. This results in a pod in a Terminated state with a pod admission failure.
