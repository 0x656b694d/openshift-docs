// Module included in the following assemblies:
//
// * networking/hardware_networks/configuring-sriov-net-attach.adoc

// Note: IB does not support ipam with `type=dhcp`.

ifeval::["{context}" == "configuring-sriov-net-attach"]
:rs: SriovNetwork
:object: pods
endif::[]

[id="nw-sriov-network-attachment_{context}"]
= Configuring SR-IOV additional network

You can configure an additional network that uses SR-IOV hardware by creating a `{rs}` object.
When you create a `{rs}` object, the SR-IOV Operator automatically creates a `NetworkAttachmentDefinition` object.

[NOTE]
=====
Do not modify or delete a `{rs}` object if it is attached to any {object} in the `running` state.
=====

.Prerequisites

* Install the OpenShift CLI (`oc`).
* Log in as a user with `cluster-admin` privileges.

.Procedure

. Create a `{rs}` object, and then save the YAML in the `<name>.yaml` file, where `<name>` is a name for this additional network. The object specification might resemble the following example:
+
[source,yaml,subs="attributes+"]
----
apiVersion: sriovnetwork.openshift.io/v1
kind: {rs}
metadata:
  name: attach1
  namespace: openshift-sriov-network-operator
spec:
  resourceName: net1
  networkNamespace: project2
  ipam: |-
  {
    "type": "host-local",
    "subnet": "10.56.217.0/24",
    "rangeStart": "10.56.217.171",
    "rangeEnd": "10.56.217.181",
    "gateway": "10.56.217.1"
  }
----

. To create the object, enter the following command:
+
[source,terminal]
----
$ oc create -f <name>.yaml
----
+
where `<name>` specifies the name of the additional network.

. Optional: To confirm that the `NetworkAttachmentDefinition` object that is associated with the `{rs}` object that you created in the previous step exists, enter the following command. Replace `<namespace>` with the networkNamespace you specified in the `{rs}` object.
+
[source,terminal]
----
$ oc get net-attach-def -n <namespace>
----

ifdef::object[]
:!object:
endif::[]

ifdef::rs[]
:!rs:
endif::[]
