= OpenShift Enterprise 3.0.2 Release Notes
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:
:prewrap!:

toc::[]

== Overview

Security, bug fixes, and enhancements for OpenShift Enterprise 3.0 are
released as asynchronous errata through the Red Hat Network. All OpenShift
Enterprise 3.0 errata is
link:https://access.redhat.com/downloads/content/290/ver=3.0.0.0/rhel---7/3.0.0.0/x86_64/product-errata[available
on the Red Hat Customer Portal]. See the
https://access.redhat.com/support/policy/updates/openshift[OpenShift Enterprise
Life Cycle] for more information about asynchronous errata.

Red Hat Customer Portal users can enable errata notifications in the account
settings for Red Hat Subscription Management (RHSM). When errata notifications
are enabled, users are notified via email whenever new errata relevant to their
registered systems are released.

[NOTE]
====
Red Hat Customer Portal user accounts must have systems registered and consuming
OpenShift Enterprise entitlements for OpenShift Enterprise errata notification
emails to generate.
====

== OpenShift Enterprise 3.0.2

OpenShift Enterprise release 3.0.2.0
https://access.redhat.com/errata/product/290/ver=3.0.0.0/rhel---7/x86_64/RHBA-2015:1835[(RHBA-2015:1835)]
is now available.

[IMPORTANT]
====
For any release, always review the Administrator Guide for instructions on
link:../install_config/upgrades.html[upgrading your OpenShift cluster] properly,
including any additional steps that may be required for a specific release.
====

This release includes the following enhancements and bug fixes:

*Backwards Compatibility*

.API
* If a deployment configuration is created without specifying the `*triggers*`
field, the deployment now defaults to having a
link:../dev_guide/builds.html#config-change-triggers[configuration change
trigger].
* The new `*subjects*` field (a list of object references) is now available when
creating link:../architecture/additional_concepts/authorization.html[role
bindings]. You can pass object references to `*User*`, `*SystemUser*`,
`*Group*`, `*SystemGroup*`, or `*ServiceAccount*` when defining the binding.
Passing a reference to a service account resolves the correct name, making it
easier to grant access to service accounts in the current namespace. If users
or groups are also specified, they take priority over values set in
`*subjects*`.
* Template parameters now support `*displayName*`, which is an optional field to
use from user interfaces when your template is shown.
* link:../dev_guide/builds.html#custom-secrets[Secrets can now be added to
custom builds] and mounted at user-specified locations.
* Pending removal:
** Support for `v1beta3` from the API and from client commands will be removed
in OpenShift Enterprise 3.1.
** Builds marked only with the *build* label will no longer be considered part
of their parent build configuration in OpenShift Enterprise 3.1. You can see
a list of affected builds by running:
+
----
$ oc get builds --all-namespaces
----
+
Then look for builds that only have the *build* label and not
*openshift.io/build*. See https://github.com/openshift/origin/issues/3502[Issue
#3502] for more information.
** The `*spec.rollingParams.updatePercent*` field on deployment configurations
will no longer be recognized in OpenShift Enterprise 3.1. Use
`*maxUnavailable*` and `*maxSurge*` instead.

*Enhancements*

.Security
* Secrets were previously limited to only being available in pods when the
service account referenced them. To make it easier to use secrets in
templates, this is now disabled by default. Cluster administrators can
override this by setting the `*serviceAccountConfig.limitSecretReferences*`
variable to *true* in the
link:../admin_guide/master_node_configuration.html#master-configuration-files[master
configuration file] to force this for the whole platform. Project
administrators can also set the *"kubernetes.io/enforce-mountable-secrets"*
annotation to *"true"* on a particular service account to require that check.

.Platform
* link:../architecture/additional_concepts/other_api_objects.html#group[Groups]
of users are now supported. Cluster administrators can use the `oadm groups`
command to manage them.
* Service accounts are now more easily bound to roles through the new
`*subjects*` field, as described in *Backwards Compatibility* above.

.Web Console
* You can now deploy, rollback, retry, and cancel deployments from the web
console.
* You can now cancel running builds from the web console.
* Improvements have been made to layout and readability at mobile resolutions.
* You can now link:../admin_guide/web_console_customization.html[customize the
web console and login page].

.Networking/Routing
* The `--host-network` flag has been added to the `openshift router` command to
allow the router to run with the container network stack when set to *false*.
* The default host name for a route has been changed to the form
`<route-name>-<namespace>.<suffix>`. This allows TLS wildcards on `<suffix>`
to work properly.
* A link:../architecture/core_concepts/routes.html#f5-router[new *F5 BIG-IPÂ®*
router plug-in] has been added, allowing F5 routers to be dynamically
configured.
* The router can now be configured to serve a subset of the routes in your
deployment:
** Pass `--namespace` to the router command to select routes in a single
namespace.
** Pass `--labels=<selector>` or `--fields=<selector>` to select only routes
with the provided labels or fields.
** Pass `--project-labels=*` to show routes in all labels that the router's
service account is granted access to, `--project-labels=<selector>` to filter
that list by label, or `--namespace-labels=<selector>` to filter all labels
when the router service account has that permission.
+
[NOTE]
====
The label list is updated every 10 minutes or when the router restarts, so new
projects may not instantly get served.
====
* Both the F5 and HAProxy routers now allow only the first route (by creation
timestamp) with a given `*host*` or generated host (when you omit the `*Host*`
field) to claim that route name. If multiple routes with the same host but
different paths are defined, all routes in the same namespace as the oldest
route with that host will be included. If the oldest route is deleted, and the
next oldest route is in a different namespace, only routes in that other
namespace will be served.

.Images
* Importing and pulling from Docker v2 registries is now supported.
* The `oc import-image` command can now create image streams with the `--from`
flag, specifying the image repository you want to import.
* When you tag an image with `oc tag` into an image stream that does not exist,
an image stream can now be automatically created.

.Storage
* The `oc volume` command now lists by default and shows you additional
information about each volume type.
* Persistent volume claims now show whether they are provisioned or not, their
size, and details about their bound persistent volume. The `oc volume` command
can also now create a new persistent volume claim for you if you specify the
`--claim-size` flag.

.CLI
* The `--list` flag has been added to the `oc new-app` command to display list
of available images and templates.
* The `--short` and `-q` flags have been added to the `oc project` command to
only display the project name.

.Builds
* Custom builds now allow a `*forcePull*` flag to indicate that the
link:../dev_guide/builds.html#custom-force-pull[custom builder image must be
pulled].
* link:../dev_guide/builds.html#image-change-triggers[Multiple image change
triggers] are now allowed in build configurations.
* The `--commit=<commit>` flag has been added to `oc start-build`, which
triggers a build of the exact Git commit specified.
* The `--env` flag has been added to `oc new-build`, allowing you to set
environment variables on your S2I builds.
* The `--wait` flag has been added to `oc start-build`, allowing you to wait for
the build completion without viewing the logs.

.Templates
* The `*required*` attribute has been added to template parameters. Templates
now cannot be instantiated without supplying a value for all required
parameters.

.Remote Execution
* The `oc rsh` command now accepts commands and arguments after the pod is
specified:
+
----
oc rsh <pod> <command> [<arguments>]
----
+
This behavior more closely mimics the `ssh` command. A TTY is automatically
allocated if your current shell passes one, otherwise you can specify `-t` to
force a TTY or `-T` to disable it.
* A number of stability and hanging issues have been resolved with `oc exec` and
`oc rsh`. However, Docker 1.6.2 has a known issue with hangs to remote shells
via `docker exec`, so Red Hat recommends upgrading Docker to a 1.7 or 1.8
build.

*Bug Fixes*

.For Developers
* The web console now allows users to specify the Git reference (branch or tag)
from which their build will be created.
(https://bugzilla.redhat.com/show_bug.cgi?id=1250153[BZ#1250153])
* Users may now specify the replica count by adjusting the scale of a deployment
configuration. This is useful for setting the replica count before a
replication controller has been created so that the value will be used for
replication controllers created in the future.
(https://bugzilla.redhat.com/show_bug.cgi?id=1250652[BZ#1250652])
* Docker client libraries were updated, and OpenShift can now import images from
authenticated Docker v2
registries.(https://bugzilla.redhat.com/show_bug.cgi?id=1255502[BZ#1255502])
* Git URI parsing has been updated to account for _git://_ style URIs, and as a
result builds using these URIs no longer fail.
(https://bugzilla.redhat.com/show_bug.cgi?id=1261449[BZ#1261449])
* Project administrators can now change a project's display name and description
by updating the project using `oc edit`.
* Updated the set of labels generated when creating a new application from
source in the web console, just as in the CLI with `oc new-app`.
* Improved the display of builds in the web console.
* Builds in which a pod is not created are no longer marked as successful in the
web console.
* S2I builds that may run as root are now prevented from starting, based on
security context constraints on the builder service account.
* Remote shell access to builder containers is now prevented.
* Builds are now listed in the CLI according to creation timestamp.
* Builds from `oc new-app` are now started immediately with the
link:../dev_guide/builds.html#config-change-triggers[configuration change
trigger].
* The help text for `oc get projects` has been fixed.
* Hangs when using `oc exec` without a TTY no longer occur.
* The `oc import-image` command no longer panics when an error occurs.
* The `--search` and `--list` options are now suggested when calling `oc
new-app` with no arguments.
* When running `oc scale` against a deployment configuration with no
deployments, the replicas are now set directly.

.For Cluster Administrators

* Administrators can now configure the IP address used for SDN traffic. Passing
node IPs as a configuration option on the node allows it to be set distinct from
the node host name for listening on other interfaces. (https://bugzilla.redhat.com/show_bug.cgi?id=1253596[BZ#1253596])
* SDN node events are now triggered when a node IP changes.
* The link:../dev_guide/deployments.html#rolling-strategy[Rolling deployment
strategy] is now used for router deployments.
* The `*mode http*` configuration has been added to the HAProxy front end SNI
definition.
* Upgraded the integrated *etcd* to v2.1.2.
* Upgraded the internal Docker registry to v2.0.1.
* The Kubernetes master service address (the first address in the service CIDR
range) has been added to the generated certificates to allow pods to verify
TLS connections to the API.
* Permissions are now preserved during image builds.
* Panics in the API server are now recovered instead of allowing the server to
crash.
* The OpenShift SDN MTU is now configurable.
