[[dev-guide-routes]]
= Routes
{product-author}
{product-version}
:data-uri:
:icons:
:experimental:
:toc: macro
:toc-title:

toc::[]

== Overview

An OpenShift xref:../architecture/core_concepts/routes.adoc#architecture-core-concepts-routes[route] exposes a
xref:../architecture/core_concepts/pods_and_services.adoc#services[service] at a
host name, like _www.example.com_, so that external clients can reach it by
name.

DNS resolution for a host name is handled separately from routing;
your administrator may have configured a cloud domain that will always
correctly resolve to the OpenShift router, or if using an unrelated
host name you may need to modify its DNS records independently to resolve
to the router.

[[creating-routes]]

== Creating Routes

Tooling for creating routes is developing. In the web console, they are
displayed but there is not yet a method to create them. Using the CLI, you
currently can create only an unsecured route:

----
$ oc expose service/<name> --hostname=<www.example.com>
----

The new route inherits the name from the service unless you specify one.

.An Unsecured Route YAML Definition
====
[source,yaml]
----
apiVersion: v1
kind: Route
metadata:
  name: route-name
spec:
  host: www.example.com
  to:
    kind: Service
    name: service-name
----
====

Unsecured routes are the default configuration, and are therefore the simplest
to set up. However, secured routes offer security for connections to remain
private. To create a secured HTTPS route encrypted with a key and certificate
(PEM-format files which you must generate and sign separately), you must
edit the unsecured route to add TLS termination.

[NOTE]
====
link:https://en.wikipedia.org/wiki/Transport_Layer_Security[TLS] is the
replacement of SSL for HTTPS and other encrypted protocols.
====

----
$ oc edit route/<name>
----

.A Secure Route Using Edge Termination
====
[source,yaml]
----
apiVersion: v1
kind: Route
metadata:
  name: route-name
spec:
  host: www.example.com
  to:
    kind: Service
    name: service-name
  tls:
    termination: edge
    key: |-
      -----BEGIN PRIVATE KEY-----
      [...]
      -----END PRIVATE KEY-----
    certificate: |-
      -----BEGIN CERTIFICATE-----
      [...]
      -----END CERTIFICATE-----
    caCertificate: |-
      -----BEGIN CERTIFICATE-----
      [...]
      -----END CERTIFICATE-----
----
====

You can specify a secured route without a key and certificate, in which case the
xref:../install_config/install/deploy_router.adoc#using-wildcard-certificates[router's
default certificate] will be used for TLS termination.

[NOTE]
====
TLS termination in OpenShift relies on
link:https://en.wikipedia.org/wiki/Server_Name_Indication[SNI] for serving
custom certificates. Any non-SNI traffic received on port 443 is handled with
TLS termination and a default certificate, which may not match the requested
host name, resulting in validation errors.
====

Further information on all types of
xref:../architecture/core_concepts/routes.adoc#secured-routes[TLS termination]
as well as
xref:../architecture/core_concepts/routes.adoc#path-based-routes[path-based
routing] are available in the
xref:../architecture/core_concepts/routes.adoc#architecture-core-concepts-routes[Architecture section].
