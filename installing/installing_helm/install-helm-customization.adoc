[id="acs-install-helm-customization"]
= Installing with customizations using Helm charts
include::modules/common-attributes.adoc[]
:context: acs-custom-install-helm

toc::[]

High-level installation flow:

. Add {product-title} Helm chart repository.
. Configure the `central-services` Helm chart.
. Install the xref:../../architecture/index.adoc#centralized-components_acs-architecture[centralized components]  (Central and Scanner).
. Install and set up the `roxctl` command-line interface.
. Generate an init bundle.
. Configure the `secured-cluster-services` Helm chart.
. Install xref:../../architecture/index.adoc#per-cluster-components_acs-architecture[per-cluster] and xref:../../architecture/index.adoc#per-node-components_acs-architecture[per-node] components (Sensor, Admission Controller, and Collector).

Before you install:

* Understand xref:../../architecture/index.adoc[{product-title} architecture].
* Review the xref:../prerequisites.adoc[prerequisites for installing {product-title}].

include::modules/adding-helm-repository.adoc[leveloffset=+1]

[id="configure-central-services-helm-chart"]
== Configuring the central-services Helm chart

This section describes Helm charts configuration parameters that you can use with the `helm install` and `helm upgrade` commands.
You can specify these parameters by using the `--set` option or by creating YAML configuration files.

Create the following files for configuring the Helm chart for installing {product-title}:

* Public configuration file `values-public.yaml`: Use this file to save all non-sensitive configuration options.
* Private configuration file `values-private.yaml`: Use this file to save all sensitive configuration options. Make sure that you store this file securely.
//TODO: Add links to sample configuration files.

include::modules/central-services-private-config.adoc[leveloffset=+2]

include::modules/central-services-public-config.adoc[leveloffset=+2]

[id="install-central-services-helm-chart"]
== Installing the central-services Helm chart

After you configure the `values-public.yaml` and `values-private.yaml` files, use the following command to install the `central-services` Helm chart:

[source,terminal]
----
$ helm install -n stackrox --create-namespace \
  stackrox-central-services stackrox/central-services \
  -f <path_to_values_public.yaml> -f <path_to_values_private.yaml> <1>
----
<1> Use the `-f` option to specify the paths for your YAML configuration files.

[id="install-roxctl-cli"]
== Installing the roxctl CLI
`roxctl` is a command-line interface (CLI) for running commands on {product-title}.
You can install the `roxctl` CLI to interact with {product-title} from a
command-line interface. You can install `roxctl` on Linux, Windows, or macOS.

// Installing the CLI by downloading the binary
include::modules/install-roxctl-cli-linux.adoc[leveloffset=+2]
include::modules/install-roxctl-cli-macos.adoc[leveloffset=+2]
include::modules/install-roxctl-cli-windows.adoc[leveloffset=+2]

// Authenticating using CLI
include::modules/cli-authentication.adoc[leveloffset=+2]
